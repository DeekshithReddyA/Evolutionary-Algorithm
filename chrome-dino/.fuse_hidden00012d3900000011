<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/public/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chrome Dino AI Lab</title>
  <link rel="stylesheet" href="style.css" />

  <!-- CDN libs (loaded before ES modules) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/neataptic@1.4.7/dist/neataptic.js"></script>
</head>

<body>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HOME SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="home-screen" class="screen">
    <div class="home-container">
      <div class="home-header">
        <h1>ü¶ï Chrome Dino AI Lab</h1>
        <p>Evolutionary Algorithms &amp; Neural Networks</p>
      </div>

      <div class="mode-grid">
        <div class="mode-card" data-mode="user">
          <div class="card-icon">üéÆ</div>
          <h3>User Play</h3>
          <p>Play the classic Chrome Dino game yourself</p>
        </div>

        <div class="mode-card" data-mode="ga">
          <div class="card-icon">üß¨</div>
          <h3>GA (Neural Network)</h3>
          <p>Genetic Algorithm with fixed-topology Neural Networks</p>
        </div>

        <div class="mode-card" data-mode="neat">
          <div class="card-icon">üß†</div>
          <h3>NEAT</h3>
          <p>NeuroEvolution of Augmenting Topologies</p>
        </div>

        <div class="mode-card disabled" data-mode="rl">
          <div class="card-icon">ü§ñ</div>
          <h3>RL</h3>
          <p>Reinforcement Learning (Coming Soon)</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAME SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="game-screen" class="screen" style="display:none">

    <!-- header bar -->
    <div class="game-header">
      <button id="backBtn" class="btn btn-secondary">‚Üê Back</button>
      <h2 id="modeTitle">Mode</h2>
      <div class="header-controls">
        <div id="aiControls" class="toggle-group" data-flex="1" style="display:none">
          <button id="trainBtn" class="btn btn-toggle active">Training</button>
          <button id="inferBtn" class="btn btn-toggle">Inference</button>
        </div>
        <button id="startStopBtn" class="btn btn-primary">Start</button>
      </div>
    </div>

    <!-- user score (user mode only) -->
    <div id="userScore" class="user-score" style="display:none">
      Score:&nbsp;<strong id="currentScore">0</strong>
      &nbsp;&nbsp;|&nbsp;&nbsp;Speed:&nbsp;<strong id="currentSpeed">2.0</strong>
    </div>

    <!-- config panel (AI modes) -->
    <div id="configPanel" class="config-panel" style="display:none">
      <div class="config-row">
        <label>Population
          <input type="number" id="popSize" value="50" min="10" max="500" />
        </label>
        <label>Mutation Rate
          <input type="number" id="mutRate" value="0.1" step="0.01" min="0.01" max="1" />
        </label>
        <label>Crossover Rate
          <input type="number" id="crossRate" value="0.7" step="0.05" min="0" max="1" />
        </label>
        <label>Elitism
          <input type="number" id="elitism" value="5" min="1" max="50" />
        </label>
        <label>Fitness
          <select id="fitnessSelect">
            <option value="score">Score Only</option>
            <option value="distance">Survival Time</option>
            <option value="combined" selected>Combined</option>
          </select>
        </label>
        <label>Selection
          <select id="selectionSelect">
            <option value="topN" selected>Top-N</option>
            <option value="tournament">Tournament</option>
            <option value="roulette">Roulette Wheel</option>
          </select>
        </label>
      </div>
    </div>

    <!-- game canvas -->
    <div class="canvas-wrapper">
      <canvas id="gameCanvas" width="1200" height="500"></canvas>
    </div>

    <!-- live + gen stats (AI modes) -->
    <div id="statsPanel" class="stats-panel" data-flex="1" style="display:none">
      <div class="stats-section">
        <h4>Live Stats</h4>
        <div id="liveStats"></div>
      </div>
      <div class="stats-section">
        <h4>Generation Stats</h4>
        <div id="genStats"></div>
      </div>
    </div>

    <!-- fitness chart (AI modes) -->
    <div id="chartContainer" class="chart-container" style="display:none">
      <h4>Fitness Over Generations</h4>
      <canvas id="fitnessChart" height="200"></canvas>
    </div>

    <!-- NEAT network viz (NEAT mode only) -->
    <div id="neatVizContainer" class="neat-viz-container" style="display:none">
      <h4>NEAT Network Topology</h4>
      <canvas id="neatVizCanvas" width="1160" height="360"></canvas>
    </div>

    <!-- export / import (AI modes) -->
    <div id="exportControls" class="export-controls" data-flex="1" style="display:none">
      <button id="exportJSON"  class="btn btn-sm">üìä Export Analytics (JSON)</button>
      <button id="exportCSV"   class="btn btn-sm">üìÑ Export Analytics (CSV)</button>
      <button id="exportModel" class="btn btn-sm">üíæ Export Model</button>
      <button id="importModel" class="btn btn-sm">üìÇ Import Model</button>
    </div>

  </div>

  <!-- app entry -->
  <script type="module" src="src/app.js"></script>
</body>
</html>
